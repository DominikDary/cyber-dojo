
I would like to move the katas/ out of its data-container and into
a regular host directory (which can be a mounted persistent-disk).
This will be important for k8s I think.
It will also make it easier to do regular upgrades.

Perhaps the simplest way to get them out, which does not worry about upgrade
of format at all, is to simply to tar pipe them out into a tgz file.
Then cp the tgz file into a dir that has been bind-mounted to a persistent disk.
This should be doable on the storer VM which is 37% full, 47% inode-full

See scripts/tar_katas_out.sh

Then untar this into the dir that has been bind-mounted to a persistent disk,
eg /persistent-disk
See https://cloud.google.com/compute/docs/disks/add-persistent-disk

$ tar -C /tmp -xf backup.tar.gz

This will create
/tmp/usr/src/cyber-dojo/katas/...

Then move it to the known location that will be volume-mounted
$ mv /tmp/usr/src/cyber-dojo/katas /persistent-disk/katas

Then give ownership to storer user (user inside storer service)
$ chown -R 19661:19661 /persistent-disk/katas

Then, storer will need to volume mount that dir to the dir it uses internally...

In a docker-compose.yml file...

THIS...
  storer:
    volumes_from:
      - container:${CYBER_DOJO_KATAS_DATA_CONTAINER}:rw

BECOMES...
  storer:
    volumes:
      - /persistent-disk/katas:/usr/src/cyber-dojo/katas:rw



If doing this on DockerToolbox then /persistent-disk will need to exist on the default VM
So the script will need to be run on the default VM.




